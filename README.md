# ЁЯМР рж╕рж╣ржЬ рж╣рзЛрж╕рзНржЯрж┐ржВ ржЧрж╛ржЗржб (React + Node) тАФ ржПржХржжржо ржирждрзБржи VPS ржерзЗржХрзЗ рж╢рзБрж░рзБ

## тЬЕ ржзрж╛ржк рзж: ржЖржЧрзЗ ржбрзЛржорзЗржЗржи рж╕рзЗржЯ ржХрж░рзЗ ржирж┐ржЗ (Hostinger)

рзз. Hostinger ржП ржпрж╛ржи ЁЯСЙ [https://hpanel.hostinger.com](https://hpanel.hostinger.com)  
рзи. ржбрзЛржорзЗржЗржи рж▓рж┐рж╕рзНржЯрзЗ ржпрж╛ржи тЖТ **DNS Zone** ржП ржХрзНрж▓рж┐ржХ ржХрж░рзБржи  
рзй. ржПржЦржи ржЦрзЗрзЯрж╛рж▓ ржХрж░рзБржи:  
 ЁЯФН ржпржжрж┐ **@, api ржмрж╛ dashboard** ржирж╛ржорзЗ ржкрзБрж░ржирзЛ ржХрзЛржирзЛ A рж░рзЗржХрж░рзНржб ржерж╛ржХрзЗ тАФ  
 ЁЯСЙ **рж╕рзЗржЧрзБрж▓рзЛ ржЖржЧрзЗ ржбрж┐рж▓рж┐ржЯ ржХрж░рзЗ ржжрж┐ржиред**

> тЪая╕П ржПржХржЗ ржирж╛ржорзЗ ржПржХрж╛ржзрж┐ржХ A рж░рзЗржХрж░рзНржб ржерж╛ржХрж▓рзЗ DNS ржХрж╛ржЬ ржХрж░ржмрзЗ ржирж╛ред

рзк. ржПржмрж╛рж░ ржирж┐ржЪрзЗрж░ ржорждрзЛ ржирждрзБржи рждрж┐ржиржЯрж╛ A рж░рзЗржХрж░рзНржб ржпрзЛржЧ ржХрж░рзБржи (ржЖржкржирж╛рж░ VPS IP ржмрж╕рж┐рзЯрзЗ):

| ржирж╛ржо         | ржЯрж╛ржЗржк | IP ржжрж┐ржмрзЗржи |
| ----------- | ---- | -------- |
| `@`         | A    | VPS_IP   |
| `api`       | A    | VPS_IP   |
| `dashboard` | A    | VPS_IP   |

ржПржЧрзБрж▓рзЛ ржжрж┐рзЯрзЗ ржЖржкржирж╛рж░:

-   `yourdomain.com`
-   `api.yourdomain.com`
-   `dashboard.yourdomain.com`

рж╕ржмржЧрзБрж▓рзЛ рж╕ржарж┐ржХржнрж╛ржмрзЗ ржЖржкржирж╛рж░ VPS-ржП ржкрзЯрзЗржирзНржЯ ржХрж░ржмрзЗ тЬЕ

---

## тЬЕ ржзрж╛ржк рзз: VS Code ржжрж┐рзЯрзЗ VPS ржП ржврзБржХрж┐

рзз. VS Code ржУржкрзЗржи ржХрж░рзБржи  
рзи. ржПржХрзНрж╕ржЯрзЗржирж╢ржи ржЕржкрж╢ржирзЗ ржпрж╛ржи (`Ctrl + Shift + X`)  
рзй. рж▓рж┐ржЦрзБржи **Remote - SSH**, рждрж╛рж░ржкрж░ **Install** ржХрж░рзБржи  
рзк. ржПржмрж╛рж░ `Ctrl + Shift + P` ржЪрж╛ржкрзБржи тЖТ рж▓рж┐ржЦрзБржи:

```
Remote-SSH: Connect to Host
```

рзл. ржпржЦржи ржЕрзНржпрж╛ржб ржХрж░рждрзЗ ржмрж▓рзЗ, рждржЦржи рж▓рж┐ржЦрзБржи:

```
ssh root@YOUR_VPS_IP
```

рзм. Enter ржжрж┐ржи, рждрж╛рж░ржкрж░ ржХрж┐ржЫрзБржХрзНрж╖ржгрзЗрж░ ржоржзрзНржпрзЗ VPS ржП ржврзБржХрзЗ ржпрж╛ржмрзЗржи ЁЯОЙ

---

## тЬЕ ржзрж╛ржк рзи: VPS ржП ржжрж░ржХрж╛рж░рж┐ ржЬрж┐ржирж┐рж╕ ржЗржирж╕рзНржЯрж▓ ржХрж░рзЗ ржирзЗржЗ

ржЯрж╛рж░рзНржорж┐ржирж╛рж▓ ржЦрзБрж▓рзЗ ржирж┐ржЪрзЗрж░ ржХржорж╛ржирзНржбржЯрж╛ ржПржХржмрж╛рж░рзЗржЗ ржХржкрж┐ ржХрж░рзЗ ржЪрж╛рж▓рж╛ржи:

```bash
apt update && apt upgrade -y
apt install -y nginx curl unzip git tmux nodejs npm certbot python3-certbot-nginx
systemctl enable nginx
systemctl start nginx
```

ЁЯСЙ ржПрждрзЗ рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ рж╕ржм ржжрж░ржХрж╛рж░рж┐ ржкрзНржпрж╛ржХрзЗржЬ ржЗржирж╕рзНржЯрж▓ рж╣ржмрзЗ  
ЁЯСЙ NGINX ржЪрж╛рж▓рзБ рж╣рзЯрзЗ ржерж╛ржХржмрзЗ рж╕ржм рж╕ржорзЯ

---

## тЬЕ ржзрж╛ржк рзй: ржирж┐ржЬрзЗрж░ ржкрзНрж░ржЬрзЗржХрзНржЯ ржЧрзБрж▓рзЛ ржЖржкрж▓рзЛржб ржХрж░рж┐ (Drag & Drop)

VS Code ржП ржЧрж┐рзЯрзЗ `/var/www/` ржлрзЛрж▓рзНржбрж╛рж░ ржУржкрзЗржи ржХрж░рзБржиред

ржПржЦржи ржЖржкржирж╛рж░ рж▓рзЛржХрж╛рж▓ ржкрж┐рж╕рж┐ ржерзЗржХрзЗ ржирж┐ржЪрзЗрж░ ржлрзЛрж▓рзНржбрж╛рж░ржЧрзБрж▓рзЛ ржзрж░рзЗ ржзрж░рзЗ ржПржЦрж╛ржирзЗ ржбрзНрж░рзНржпрж╛ржЧ ржХрж░рзЗ ржЫрзЗрзЬрзЗ ржжрж┐ржи:

| ржкрзНрж░ржЬрзЗржХрзНржЯ            | VPS-ржП ржХрзЛржерж╛рзЯ ржжрж┐ржмрзЗржи    |
| ------------------- | -------------------- |
| ржлрзНрж░ржирзНржЯржПржирзНржб (React)  | `/var/www/frontend`  |
| ржмрзНржпрж╛ржХржПржирзНржб (Node.js) | `/var/www/backend`   |
| ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб (React)  | `/var/www/dashboard` |

рждрж╛рж░ржкрж░ ржкрзНрж░рждрж┐ржЯрж╛ ржлрзЛрж▓рзНржбрж╛рж░рзЗ ржврзБржХрзЗ ржЯрж╛рж░рзНржорж┐ржирж╛рж▓ ржЦрзБрж▓рзЗ рж░рж╛ржи ржХрж░рзБржи:

```bash
npm install
```

---

## тЬЕ ржзрж╛ржк рзк: ржкрзНрж░ржЬрзЗржХрзНржЯржЧрзБрж▓рзЛ ржЪрж╛рж▓рзБ ржХрж░рзЗ ржжрзЗржЗ (tmux ржжрж┐рзЯрзЗ)

ржЯрж╛рж░рзНржорж┐ржирж╛рж▓рзЗ ржирж┐ржЪрзЗрж░ ржХржорж╛ржирзНржбржЧрзБрж▓рзЛ ржПржХрзЗ ржПржХрзЗ ржЪрж╛рж▓рж╛ржи:

```bash
tmux new -s frontend
cd /var/www/frontend
npm start
# Ctrl + B, рждрж╛рж░ржкрж░ D ржЪрж╛ржкрзБржи (detach)

tmux new -s backend
cd /var/www/backend
npm start
# Ctrl + B, рждрж╛рж░ржкрж░ D

tmux new -s dashboard
cd /var/www/dashboard
npm start
# Ctrl + B, рждрж╛рж░ржкрж░ D
```

ЁЯСЙ ржПрждрзЗ ржЖржкржирж┐ ржЯрж╛рж░рзНржорж┐ржирж╛рж▓ ржмржирзНржз ржХрж░рж▓рзЗржУ рж╕рж╛рж░рзНржнрж╛рж░ ржЪрж╛рж▓рзБ ржерж╛ржХржмрзЗред

---

## тЬЕ ржзрж╛ржк рзл: ржПржЦржи NGINX ржХржиржлрж┐ржЧрж╛рж░ ржХрж░рж┐

### ЁЯУБ `/etc/nginx/sites-available/` ржлрзЛрж▓рзНржбрж╛рж░рзЗ ржпрж╛ржи (VS Code ржжрж┐рзЯрзЗ)

---

### тЪая╕П ржПржХржЯрж╛ ржЬрж┐ржирж┐рж╕ ржЦрзБржмржЗ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг

ЁЯФе **`default` ржирж╛ржорзЗрж░ ржпрзЗ ржлрж╛ржЗрж▓ржЯрж╛ ржЖржЫрзЗ, рж╕рзЗржЯрж╛ ржбрж┐рж▓рж┐ржЯ ржХрж░рзЗ ржжрж┐ржиред**  
ЁЯЫС **ржХрж┐ржЫрзБрждрзЗржЗ ржЕржирзНржп ржХрзЛржирзЛ ржлрж╛ржЗрж▓ ржбрж┐рж▓рж┐ржЯ ржХрж░ржмрзЗржи ржирж╛ред**

**ржХрзЗржи?**  
ржПржЗ ржлрж╛ржЗрж▓ржЯрж╛ ржерж╛ржХрж▓рзЗ, ржЖржкржирж╛рж░ рж╕рж╛ржмржбрзЛржорзЗржЗржи ржХрж╛ржЬ ржирж╛ ржХрж░рзЗ nginx-ржПрж░ default ржкрзЗржЗржЬ ржжрзЗржЦрж╛ржмрзЗред

---

### ЁЯЫа ржПрж░ржкрж░ рзйржЯрж╛ ржлрж╛ржЗрж▓ ржмрж╛ржирж╛ржи:

-   `root`
-   `api`
-   `dashboard`

ржкрзНрж░рждрж┐ржЯрж╛рждрзЗ ржирж┐ржЪрзЗрж░ ржорждрзЛ ржХржиржлрж┐ржЧ рж▓рж┐ржЦрзЗ ржлрзЗрж▓рзБржи (рж╕рж╛ржмржбрзЛржорзЗржЗржи ржУ port ржирж┐ржЬрзЗрж░ ржорждрзЛ ржХрж░рзЗ ржмрж╕рж╛ржи):

```nginx
server {
    listen 80;
    server_name (subdomain.)yourdomain.com;

    location / {
        proxy_pass http://localhost:(port);
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}
```

ржЯрж╛рж░рзНржорж┐ржирж╛рж▓рзЗ рж░рж╛ржи ржХрж░рзБржи:

```bash
sudo ln -s /etc/nginx/sites-available/root /etc/nginx/sites-enabled/
sudo ln -s /etc/nginx/sites-available/api /etc/nginx/sites-enabled/
sudo ln -s /etc/nginx/sites-available/dashboard /etc/nginx/sites-enabled/
```

---

### ЁЯФБ ржПржмрж╛рж░ NGINX рж░рж┐рж▓рзЛржб ржжрж┐ржи

ржЯрж╛рж░рзНржорж┐ржирж╛рж▓рзЗ рж░рж╛ржи ржХрж░рзБржи:

```bash
nginx -t
systemctl reload nginx
```

---

## тЬЕ ржзрж╛ржк рзм: SSL ржмрж╕рж╛ржЗ (HTTPS ржлрзНрж░рж┐ рж╕рж╛рж░рзНржЯрж┐ржлрж┐ржХрзЗржЯ)

ржЯрж╛рж░рзНржорж┐ржирж╛рж▓рзЗ ржирж┐ржЪрзЗрж░ржЯрж╛ ржЪрж╛рж▓рж╛ржи:

```bash
certbot --nginx -d yourdomain.com -d api.yourdomain.com -d dashboard.yourdomain.com
```

ЁЯСЙ ржпрзЗржЯрж╛ ржЬрж┐ржЬрзНржЮрзЗрж╕ ржХрж░рзЗ, рж╕рзЗржЦрж╛ржирзЗ **redirect HTTP to HTTPS** ржЕржкрж╢ржиржЯрж╛ рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рзЗ ржжрж┐ржиред

---

## ЁЯОЙ рж╕ржм рж╣рзЯрзЗ ржЧрзЗржЫрзЗ!

| URL                                | ржХрзА ржжрзЗржЦрж╛ржмрзЗ |
| ---------------------------------- | --------- |
| `https://yourdomain.com`           | Main app  |
| `https://api.yourdomain.com`       | Backend   |
| `https://dashboard.yourdomain.com` | Dashboard |

---

## тЪЩя╕П ржжрж░ржХрж╛рж░рж┐ ржХржорж╛ржирзНржб

### ЁЯз╡ TMUX

```bash
tmux new -s name        # ржирждрзБржи рж╕рзЗрж╢ржи
tmux ls                 # рж╕ржм рж╕рзЗрж╢ржи ржжрзЗржЦрждрзЗ
tmux attach -t name     # ржкрзБрж░рж╛ржирзЛ рж╕рзЗрж╢ржирзЗ ржврзБржХрждрзЗ
tmux kill-session -t name # рж╕рзЗрж╢ржи ржмржирзНржз ржХрж░рждрзЗ
```

### ЁЯМР NGINX

```bash
nginx -t                 # config ржарж┐ржХ ржЖржЫрзЗ ржХрж┐ ржирж╛ ржжрзЗржЦрждрзЗ
systemctl reload nginx  # NGINX рж░рж┐рж▓рзЛржб ржжрж┐рждрзЗ
```

### ЁЯФР CERTBOT (SSL)

```bash
certbot renew --dry-run   # ржЕржЯрзЛ рж░рж┐ржирж┐ржЙ ржарж┐ржХржарж╛ржХ рж╣ржЪрзНржЫрзЗ ржХрж┐ ржирж╛ ржжрзЗржЦрждрзЗ
```
